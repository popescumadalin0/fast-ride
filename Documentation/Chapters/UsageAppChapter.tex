\chapter{UTILIZAREA APLICAȚIEI}

\section{Instalarea aplicației}

Pentru a putea folosi aplicația trebuie să fie instalate mai multe componente:
\begin{itemize}
    \item \textit{Docker} - pentru storage
    \item \textit{dotnet tool} - pentru comenzi în terminal și compilarea .NET;
    \item \textit{Azurite} - emulatorul pentru Azure Storage;
    \item \textit{SignalR Emulator} - emulatorul pentru server-ul SignalR;
    \item \textit{Azure Functions Tools} - pentru pornirea proiectului Azure;
    \item \textit{ngrok/Visual Studio sau Rider} - în caz de deployment sau doar un IDE pentru rularea codului.
\end{itemize}

Prima dată se obține codul, fie din surse, fie de pe GitHub.

Trebuie instalat \textit{Docker} deoarece \textit{Azurite} vine cu foarte multe fișiere temporale și
există riscul ca mașina să rămână fără memorie.

Următorul pas reprezintă deschiderea unui \textit{Terminal}, și să se navigheze către folderul \textit{Docker} din proiect, folosind
comanda:
\begin{verbatim}
    cd C:\Work\FastRide\fast-ride\Run\Docker
\end{verbatim}
Apoi trebuie rulată următoarea comadă pentru a instala \textit{Azurite}:
\begin{verbatim}
    docker-compose up -d
\end{verbatim}
Dacă există eroare privind comanda \textit{docker-compose}, atunci acesta trebuie instalat.
Urmează să se instaleze \textit{dotnet tool} și să se instaleze \textit{SignalR Emulator}-ul prin comanda:
\begin{verbatim}
    dotnet tool install -g Microsoft.Azure.SignalR.Emulator
\end{verbatim}

Mai departe trebuie deschis \textit{Docker}-ul și pornit \textit{Azurite}, apoi rularea comenzii:

\begin{verbatim}
    cd C:\Work\FastRide\fast-ride\Run\Docker
    asrs-emulator start
\end{verbatim}

Pentru a rula codul, fie se deschide un IDE cu ambele soluții și se rulează, fie se rulează din terminal
cu beneficiul de a publica în rețea aplicația. Pentru terminal trebuie rulate următoarele comenzi:

\begin{verbatim}
    cd C:\Work\FastRide\fast-ride\FastRide.Server
    func start

    ngrok http http://localhost:7102 # pentru ngrok (din ngrok.exe)
\end{verbatim}

Dacă se folosește \textit{ngrok} atunci trebui actualizată configurația din Client pentru \textit{SDK}-ul server-ului.
\begin{verbatim}
    cd C:\Work\FastRide\fast-ride\FastRide.Client
    dotnet run --urls "http://localhost:7028"
    ngrok http https://localhost:7028 # pentru ngrok (din ngrok.exe)
\end{verbatim}


\section{Manual de utilizare}

Aplicația Fast Ride este concepută pentru a facilita rezervarea și acceptarea curselor între
clienți și șoferi într-un mod rapid, sigur și intuitiv. Utilizatorul se autentifică
cu un cont Google, își poate introduce un număr de telefon (dacă nu a fost deja 
preluat automat) și poate începe imediat să interacționeze cu platforma.
Clienții pot vizualiza harta, alege punctul de plecare și destinația, iar aplicația
va calcula ruta și va căuta șoferi disponibili în apropiere. Odată ce un șofer 
acceptă cursa, aceasta devine activă și poate fi urmărită în timp real. La final, 
clientul poate oferi un rating, iar istoricul curselor este salvat pentru consultare 
ulterioară.

Diagrama \textit{Use Case} reflectă interacțiunile principale dintre utilizatori și sistem. 
Există trei tipuri de actori: clientul (\textit{User}), șoferul (\textit{Driver}) și administratorul (\textit{Admin}).
Clientul poate efectua acțiuni precum: 
autentificare, rezervare cursă, vizualizare rută, urmărire în timp real și acordare de rating. 
Șoferul, la rândul său, se autentifică, primește 
notificări cu cereri de curse, le poate accepta, vede traseul și finalizează cursa. 
Toate aceste interacțiuni sunt coordonate de sistemul backend, care se ocupă de procesarea 
cererilor, actualizarea în timp real a stărilor și salvarea datelor în storage.

În analiza cazurilor de utilizare, diagrama Use Case nu doar conturează 
funcționalitățile sistemului, ci evidențiază și relațiile de dependență între acțiuni 
și actori. Un aspect important vizibil în diagramă este separarea clară a 
responsabilităților, ceea ce permite o arhitectură ușor de întreținut. 
De exemplu, legătura dintre client și acțiunea de evaluare a șoferului apare doar 
după încheierea unei curse, ceea ce indică un flux condiționat logic. Similar, 
interacțiunea șoferului cu cursa, este posibilă doar în momentul în care aceasta a 
fost creată și nu este deja acceptată, ceea ce reflectă restricții de business 
transpuse clar în comportamentul aplicației. În acest fel, diagrama devine nu doar o 
hartă a funcționalităților, ci și o expresie a regulilor din spatele aplicației.

\begin{figure}[H]
    \centering
    \includegraphics[width=15cm]{Assets/UserCase.png}
    \caption{Diagrama \textit{Use case} a proiectului.}
    \label{fig:UserCase}
\end{figure}

Aplicația este \textit{responsive} și este suportată atât pe desktop cât și pe mobile.

\begin{figure}[H]
    \centering
    \includegraphics[width=4cm]{Assets/responsive1.png}
    \includegraphics[width=10cm]{Assets/responsive2.png}
    \caption{Bara de navigare pe desktop și mobile.}
    \label{fig:responsive}
\end{figure}

\subsection{Experiența utilizatorului}

Utilizatorul trebuie să se autentifice în aplicație, prin contul Google, apăsând butonul de \textit{login}. 
Această etapă este necesară pentru a putea accesa funcționalitățile aplicației.
Fără autentificare, utilizatorul poate doar să vadă locația curentă, să se găsească pe hartă și să
caute diverse locații.

\begin{figure}[H]
    \centering
    \includegraphics[width=1cm]{Assets/human.png}
    \caption{Mark-ul \textit{human} ce indică locația actuală a utilizatorului.}
    \label{fig:humanMark}
\end{figure}

După autentificare, utilizatorul își poate rezerva o cursă. Acest lucru se realizează prin
plasarea unui \textit{pin} pe hartă ce indică locul unde dorește să fie lăsat.

\begin{figure}[H]
    \centering
    \includegraphics[width=1cm]{Assets/pin.png}
    \caption{Mark-ul \textit{pin} pentru a sugera destinația.}
    \label{fig:pinMark}
\end{figure}

Pentru a realiza asta, fie se face click pe hartă, fie se folosește bara de search cu sugestii.

\begin{figure}[H]
    \centering
    \includegraphics[width=8cm]{Assets/search.png}
    \caption{Bara de căutare pentru adrese cu sugestii.}
    \label{fig:searchAddress}
\end{figure}

Utilizatorul poate apăsa butonul \textit{Ride} pentru a porni cursa.
Pe hartă se afisează și ceilalți șoferi ce sunt disponibili pentru o cursă din localitatea sa.

\begin{figure}[H]
    \centering
    \includegraphics[width=1cm]{Assets/driver.png}
    \caption{Mark-ul \textit{driver} ce semnifică un utilizator de tip șofer disponibil.}
    \label{fig:driverPin}
\end{figure}

Odată apasat butonul, utilizatorul trebui sa treacă prin trei pași: să confirme cursa,
să ofere informații despre cardul bancar și să confirme că totul este în regulă. Un pop-up 
cu 3 steps i se deschide și trebui completat. Dacă ceva nu este în ordine, utilizatorul primește
feedback în legătura cu erorile.

\begin{figure}[H]
    \centering
    \includegraphics[width=14cm]{Assets/acceptRideUser.png}
    \includegraphics[width=14cm]{Assets/card.png}
    \caption{Pașii pe care utilizatorul trebuie să îi completeze.}
    \label{fig:paymentStep12}
\end{figure}

\begin{figure}[H]
    \centering
    \includegraphics[width=14cm]{Assets/donePayment.png}
    \caption{Mesajul de confirmare că totul este în regulă.}
    \label{fig:paymentStep3}
\end{figure}

Mai departe, utilizatorul așteaptă pentru ca un șofer să îi accepte cursa. În caz că nu se găsește un șofer atunci cursa este anulată.
Fiecare status de anulare se observă în meniul de informare, ce ține locul bării de căutare.

\begin{figure}[H]
    \centering
    \includegraphics[width=7cm]{Assets/status.png}
    \caption{Meniul de informare al status-ului.}
    \label{fig:statusMenu}
\end{figure}

Dacă s-a găsit un șofer, atunci utilizatorului i se deschide un pop-up cu detaliile
despre acesta și apoi este nevoie să aștepte ca șoferul să ajungă să îl preia ca mai apoi să meargă spre 
destinație.

\begin{figure}[H]
    \centering
    \includegraphics[width=10cm]{Assets/driverDetails.png}
    \caption{Detaliile despre șofer după ce acceptă cursa.}
    \label{fig:driverDetails}
\end{figure}

Utilizatorul poate vedea ruta pe unde șoferul o să meargă, iar \textit{pin}-ul ce indică
locația curentă se modifică în \textit{currentCar}.

\begin{figure}[H]
    \centering
    \includegraphics[width=1cm]{Assets/currentCar.png}
    \caption{Mark-ul \textit{currentCar} ce semnifică că utilizatorul călătorește cu mașina.}
    \label{fig:currentCar}
\end{figure}

La final de cursă, opțional, clientul poate lăsa o recenzie șoferului.

\begin{figure}[H]
    \centering
    \includegraphics[width=6cm]{Assets/rateDriver.png}
    \caption{Pop-ul ce permite oferirea unui recenzii șoferului.}
    \label{fig:rateDriver}
\end{figure}

Alte lucruri pe care le poate face clientul, dar și celelalte tipuri de utilizatori,
este să își schimbe numărul de telefon sau să navigheze către Google Accounts pentru a își schimba numele sau imaginea de profil.

\begin{figure}[H]
    \centering
    \includegraphics[width=7cm]{Assets/popoverUser.png}
    \includegraphics[width=8cm]{Assets/changePhoneNumber.png}
    \caption{Schimbarea numărului de telefon apăsând pe imaginea de profil.}
    \label{fig:phoneNumberChange}
\end{figure}

Utilizatorii pot vedea și istoricul curselor prin apăsarea butonului din bara de navigare.
Pentru fiecare cursă se poate vedea adresa de destinație, data și ora la care s-a completat cursa, prețul plătit
și, în caz de anulare a cursei, motivul anulării. Folosind butonul \textit{Rebook} utilizatorul poate
să repună \textit{pin}-ul în același loc precum în istoric.

\begin{figure}[H]
    \centering
    \includegraphics[width=10cm]{Assets/history.png}
    \caption{Istoricul curselor.}
    \label{fig:historyRides}
\end{figure}

\subsection{Experiența șoferului}

Șoferul nu are accesul să rezerve o cursă, poate doar să accepte una, de aceea flow-ul acestuia începe după 
ce un client începe o cursă și primește cererea. Bineînțeles, trebuie să fie autentificat.

El are un alt buton, \textit{GetRides} care deschide un pop-ul unde poate vedea cursele asignate acestuia.

\begin{figure}[H]
    \centering
    \includegraphics[width=8cm]{Assets/driverNavBar.png}
    \includegraphics[width=10cm]{Assets/acceptRide.png}
    \caption{Bara de navigare împreună cu pop-up-ul cu ofertele curente.}
    \label{fig:driverNavBar}
\end{figure}

Singurul lor al șoferului, după ce a acceptat cursa este să meargă la client, să îl aștepte și să
meargă împreună la destianție. În acești pași, șoferul are prima destinație către client, apoi către destinația propiu zisă, aleasă
de utilizator.

Ca și ajutor în trafic, acesta poate să vadă ruta, actualizându-se în timp real și poate regăsi și
indicații de navigare.

\begin{figure}[H]
    \centering
    \includegraphics[width=10cm]{Assets/indicates.png}
    \includegraphics[width=10cm]{Assets/route.png}
    \caption{Exemplu de rută și indicații de navigare.}
    \label{fig:indicates}
\end{figure}

\subsection{Experiența admin-ului}

În plus de cele menționare la utilizatorul normal, administratorul poate schimba tipul 
oricărui utilizator, poate actualiza numărul de telefon și .
Prin apăsarea butonul din bara de navigare, i se deschide un tabel unde poate vedea toate informațiile despre utilizatori.
El poate să și filtreze utilizatorii după numărul de telefon, nume, email sau identificator.
\begin{figure}[H]
    \centering
    \includegraphics[width=16cm]{Assets/adminPage.png}
    \caption{Pagina administratorului.}
    \label{fig:adminPage}
\end{figure}